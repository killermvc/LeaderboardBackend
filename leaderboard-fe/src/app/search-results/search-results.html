<div class="search-container">
  <h1>Search Results</h1>

  @if (searchQuery()) {
    <p class="search-query">Searching for: "{{ searchQuery() }}"</p>
  }

  @if (loading()) {
    <div class="loading">Loading...</div>
  } @else {
    @if (!hasResults()) {
      <div class="no-results">
        <p>No results found for "{{ searchQuery() }}"</p>
      </div>
    } @else {
      <!-- Games Results -->
      @if (filteredGames().length > 0) {
        <section class="results-section">
          <h2>Games ({{ filteredGames().length }})</h2>
          <div class="games-grid">
            @for (game of filteredGames(); track game.id) {
              <app-game-card
                [game]="game"
                (click)="viewGame(game.id)"
              />
            }
          </div>
        </section>
      }

      <!-- Users Results -->
      @if (filteredUsers().length > 0) {
        <section class="results-section">
          <h2>Users ({{ filteredUsers().length }})</h2>
          <div class="users-grid">
            @for (user of filteredUsers(); track user.id) {
              <div class="user-card" (click)="viewUser(user.id)">
                <div class="user-icon">ðŸ‘¤</div>
                <div class="user-info">
                  <span class="username">{{ user.username }}</span>
                  <div class="user-stats">
                    <span class="stat">{{ user.scoresCount ?? 0 }} scores</span>
                    <span class="stat-separator">â€¢</span>
                    <span class="stat">{{ user.gamesPlayedCount ?? 0 }} games</span>
                  </div>
                  @if (user.createdAt) {
                    <span class="joined">Joined {{ getTimeAgo(user.createdAt) }}</span>
                  }
                </div>
              </div>
            }
          </div>
        </section>
      }
    }
  }
</div>
